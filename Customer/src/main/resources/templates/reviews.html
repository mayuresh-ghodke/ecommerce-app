<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<!-- Basic -->

<head th:replace="~{fragments::head}"></head>

<head>
    <style>
        #reviewBtn {
            height: 35px;
            width: 100%;
            background-color: ghostwhite;
            border-radius: 10px;
            border: 1px solid black;
            text-decoration-color: black;
        }

        
    </style>
</head>

<body class="bg-light">
    <div th:replace="fragments ::main-top"></div>
    <header th:replace="~{fragments::main-header}"></header>

    <!-- Review Page Content Start -->

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="p-5">
                    <div class="row d-flex">
                        <div class="col-md-6">
                            <h4 class="ml-4 mb-3 font-weight-bold">My Reviews</h4>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-right font-weight-bold" th:if="${reviewList.size() >0}">Total Reviews: <span th:text="${reviewList.size()}"></span></h5>
                        </div> 
                    </div>
                    <table class="mt-3 table">
                        <thead>
                            <th>Sr.No.</th>
                            <th>Product</th>
                            <th></th>
                            <th>Feedback</th>
                            <th>Rating</th>
                            <th>Action</th>
                            <th></th>
                        </thead>
                        <tbody>
                            <tr th:if="${reviewList.size()==0}">
                               <td colspan="6" class="text-center">Reviews are not available.</td> 
                            </tr>
                            <tr th:each="review, iterStat : ${reviewList}">
                                <td th:text="${iterStat.index + 1 }"></td>
                                <td>
                                    <img th:src="'data:image/jpeg;base64,' + ${productList[iterStat.index].image}"
                                        width="80px" height="90px" class="img-fluid" alt="Product Image">
                                </td>
                                <td th:text="${productList[iterStat.index].name}" style="width:300px;">Product Name</td>
                                <td th:text="${review.feedback}">Review Feedback</td>
                                <td>
                                    <div class="rating">
                                        <span class="star" style="color: orange;"
                                            th:each="star : ${#numbers.sequence(1, review.ratingNumber)}">&#9733;</span>
                                        <span class="star" style="color: #ccc;" th:each="star : ${#numbers.sequence(review.ratingNumber + 1, 5)}"
                                            th:if="${review.ratingNumber < 5}">&#9733;</span>
                                    </div>
                                </td>
                                <td>
                                    <a th:href="@{/update-review/{reviewId}(reviewId=${review.reviewId})}">Edit</a>
                                    <a th:href="@{/delete-review/{reviewId}(reviewId=${review.reviewId})}"
                                        class="ml-3">Delete</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                </div>
            </div>
        </div>
    </div>

    <!-- Review Page Content End -->




    <footer th:replace="~{fragments::footer}"></footer>
    
</body>

</html>